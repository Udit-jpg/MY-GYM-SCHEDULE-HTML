<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Weekly Gym Plan Poster (1920×1080) + Checkboxes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root {
    --bg1: #0f172a; --bg2: #1e293b;
    --card: #0b1220cc; --text: #e2e8f0; --muted: #94a3b8;
    --green: #22c55e; --sky: #38bdf8; --amber: #f59e0b;
  }
  html, body { margin:0; padding:0; background:#000; color:var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
  /* Exact 1920×1080 canvas */
  #poster {
    width:1920px; height:1080px; margin:0 auto; position:relative; overflow:hidden;
    background: radial-gradient(1200px 700px at 25% 20%, #1f2937 0%, #0f172a 60%, #0a0f1c 100%),
                linear-gradient(135deg, var(--bg1), var(--bg2));
    box-shadow: 0 0 40px rgba(0,0,0,0.6) inset;
  }
  header {
    position:absolute; left:40px; right:40px; top:28px;
    display:flex; align-items:center; justify-content:space-between; gap:20px;
  }
  .head-left { display:flex; flex-direction:column; gap:4px; min-width:0; }
  .title { font-weight:800; font-size:46px; letter-spacing:.5px;
    background:linear-gradient(90deg, #e2e8f0, #a7f3d0);
    -webkit-background-clip:text; background-clip:text; color:transparent; white-space:nowrap; }
  .subtitle { font-size:18px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .toolbar { display:flex; gap:8px; flex-wrap:wrap; }
  .btn {
    background:#0f766e; color:white; border:1px solid rgba(255,255,255,0.2);
    padding:8px 12px; border-radius:10px; font-size:14px; cursor:pointer;
  }
  .btn.secondary { background:#334155; }
  .btn.warn { background:#b45309; }
  .btn input[type=file] { display:none; }

  .grid {
    position:absolute; left:40px; right:40px; top:100px; bottom:40px;
    display:grid; gap:14px;
    grid-template-columns:repeat(3, 1fr);
    grid-template-rows: 1fr 1fr 0.75fr;
  }
  .card {
    background: linear-gradient(180deg, #0b1220e6, #0b1220cc);
    border:1px solid rgba(148,163,184,0.18); border-radius:14px;
    padding:12px 14px; display:flex; flex-direction:column; gap:6px;
    backdrop-filter: blur(6px);
  }
  .card h2 { margin:0; font-size:20px; letter-spacing:.3px; display:flex; align-items:center; gap:8px; }
  .tag { font-size:12px; padding:2px 8px; border-radius:999px;
    background: rgba(56,189,248,0.08); color:#7dd3fc; border:1px solid rgba(56,189,248,0.25); }
  .tag.green { background: rgba(34,197,94,0.08); color:#86efac; border-color: rgba(34,197,94,0.25); }
  .tag.amber { background: rgba(245,158,11,0.10); color:#fbbf24; border-color: rgba(245,158,11,0.28); }

  .section { margin-top:4px; background:rgba(148,163,184,0.06); border:1px dashed rgba(148,163,184,0.25); border-radius:10px; padding:8px; }
  .section h3 { margin:0 0 6px 0; font-size:14px; color:#cbd5e1; letter-spacing:.2px; display:flex; align-items:center; gap:6px; }
  .list { display:grid; grid-auto-rows:min-content; gap:4px; }
  .item {
    display:flex; align-items:center; gap:8px; font-size:14px; color:#e5e7eb;
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  .item input[type=checkbox] { width:18px; height:18px; accent-color:#22c55e; }
  .icon { width:20px; text-align:center; }
  .muted { color:var(--muted); font-size:13px; }
  .foot { margin-top:auto; font-size:12px; color:var(--muted); display:flex; justify-content:space-between; align-items:center; }
  .note { color:#7dd3fc; }
  .accent { color:#86efac; }

  .sunday { grid-column:1/4; }

  /* Checked styling */
  .done { color:#9ca3af; text-decoration:line-through; }
</style>
</head>
<body>
<div id="poster" role="img" aria-label="Weekly Gym Plan Poster 1920 by 1080">

  <header>
    <div class="head-left">
      <div class="title">Weekly Gym Plan</div>
      <div class="subtitle">Full HD 1920×1080 • Checkboxes with auto‑save • Export/Import XML</div>
    </div>
    <div class="toolbar">
      <button class="btn" id="exportXmlBtn">Export Progress (XML)</button>
      <label class="btn secondary" for="importXmlInput">Import Progress (XML)<input id="importXmlInput" type="file" accept=".xml"></label>
      <button class="btn warn" id="resetAllBtn">Reset All</button>
    </div>
  </header>

  <div class="grid">
    <!-- Monday -->
    <section class="card" data-day="monday">
      <h2>🏋️ Monday <span class="tag">Upper • Push</span></h2>
      <div class="section">
        <h3>Warm‑up • 10 min</h3>
        <div class="item"><span class="icon">🏃</span><span class="txt">Light treadmill jog or cycle</span></div>
      </div>
      <div class="section">
        <h3>Workout</h3>
        <div class="list">
          <div class="item"><span class="icon">🏋️</span><span class="txt">Bench Press (or Dumbbell Press) – 4 × 8–12</span></div>
          <div class="item"><span class="icon">💪</span><span class="txt">Overhead Shoulder Press – 4 × 10–12</span></div>
          <div class="item"><span class="icon">🏋️</span><span class="txt">Incline Dumbbell Press – 3 × 10–12</span></div>
          <div class="item"><span class="icon">👐</span><span class="txt">Lateral Raises – 3 × 15</span></div>
          <div class="item"><span class="icon">↘️</span><span class="txt">Triceps Dips (or Cable Pushdown) – 3 × 12–15</span></div>
        </div>
      </div>
      <div class="section">
        <h3>Core</h3>
        <div class="item"><span class="icon">🤸</span><span class="txt">Plank – 3 × 1 min</span></div>
      </div>
      <div class="foot"><span>Cool‑down & Stretching • 10 min</span><span class="note">Form first • Control tempo</span></div>
    </section>

    <!-- Tuesday -->
    <section class="card" data-day="tuesday">
      <h2>🏋️ Tuesday <span class="tag green">Lower • Strength</span></h2>
      <div class="section">
        <h3>Warm‑up • 10 min</h3>
        <div class="item"><span class="icon">🚴</span><span class="txt">Stationary bike or light jogging</span></div>
      </div>
      <div class="section">
        <h3>Workout</h3>
        <div class="list">
          <div class="item"><span class="icon">🦵</span><span class="txt">Squats (Barbell or Dumbbell) – 4 × 8–12</span></div>
          <div class="item"><span class="icon">🦿</span><span class="txt">Leg Press – 3 × 12</span></div>
          <div class="item"><span class="icon">🏋️</span><span class="txt">Romanian Deadlifts (light or DB for form) – 3 × 10</span></div>
          <div class="item"><span class="icon">🚶</span><span class="txt">Lunges – 3 × 12 each leg</span></div>
          <div class="item"><span class="icon">🦶</span><span class="txt">Calf Raises – 4 × 15</span></div>
        </div>
      </div>
      <div class="section">
        <h3>Core</h3>
        <div class="item"><span class="icon">🧗</span><span class="txt">Hanging Leg Raises – 3 × 12–15</span></div>
      </div>
      <div class="foot"><span>Cool‑down & Stretching • 10 min</span><span class="note">Depth • Neutral spine</span></div>
    </section>

    <!-- Wednesday -->
    <section class="card" data-day="wednesday">
      <h2>🏃 Wednesday <span class="tag amber">Cardio + Core</span></h2>
      <div class="section">
        <h3>Cardio • 30–40 min</h3>
        <div class="list">
          <div class="item"><span class="icon">🏃</span><span class="txt">Treadmill at moderate intensity</span></div>
          <div class="item"><span class="icon">🚴</span><span class="txt">Elliptical or Cycle</span></div>
        </div>
      </div>
      <div class="section">
        <h3>Core Workout</h3>
        <div class="list">
          <div class="item"><span class="icon">🤸</span><span class="txt">Plank – 3 × 1 min</span></div>
          <div class="item"><span class="icon">🌀</span><span class="txt">Russian Twists – 3 × 20</span></div>
          <div class="item"><span class="icon">🚲</span><span class="txt">Bicycle Crunches – 3 × 20</span></div>
          <div class="item"><span class="icon">🪓</span><span class="txt">Cable Woodchoppers – 3 × 15 per side</span></div>
        </div>
      </div>
      <div class="foot"><span>Cool‑down & Stretching • 10 min</span><span class="note">Steady breathing • RPE ~6</span></div>
    </section>

    <!-- Thursday -->
    <section class="card" data-day="thursday">
      <h2>🏋️ Thursday <span class="tag">Upper • Pull</span></h2>
      <div class="section">
        <h3>Warm‑up • 10 min</h3>
        <div class="item"><span class="icon">🏃</span><span class="txt">Light cardio</span></div>
      </div>
      <div class="section">
        <h3>Workout</h3>
        <div class="list">
          <div class="item"><span class="icon">🧗</span><span class="txt">Pull‑Ups (Assisted if needed) – 4 × 8–10</span></div>
          <div class="item"><span class="icon">↔️</span><span class="txt">Barbell or Dumbbell Rows – 4 × 10</span></div>
          <div class="item"><span class="icon">⬇️</span><span class="txt">Lat Pulldown – 3 × 12</span></div>
          <div class="item"><span class="icon">🎯</span><span class="txt">Face Pulls – 3 × 15</span></div>
          <div class="item"><span class="icon">💪</span><span class="txt">Biceps Curl (Barbell/Dumbbell/Cable) – 3 × 12–15</span></div>
        </div>
      </div>
      <div class="section">
        <h3>Core</h3>
        <div class="item"><span class="icon">🧵</span><span class="txt">Cable Crunch – 3 × 15</span></div>
      </div>
      <div class="foot"><span>Cool‑down & Stretching • 10 min</span><span class="note">Squeeze back • Full ROM</span></div>
    </section>

    <!-- Friday -->
    <section class="card" data-day="friday">
      <h2>🏋️ Friday <span class="tag green">Lower + Functional</span></h2>
      <div class="section">
        <h3>Warm‑up • 10 min</h3>
        <div class="item"><span class="icon">🤸</span><span class="txt">Dynamic stretching + light cardio</span></div>
      </div>
      <div class="section">
        <h3>Workout</h3>
        <div class="list">
          <div class="item"><span class="icon">🦿</span><span class="txt">Leg Press – 4 × 12</span></div>
          <div class="item"><span class="icon">🪜</span><span class="txt">Step‑Ups with Dumbbells – 3 × 12</span></div>
          <div class="item"><span class="icon">🍑</span><span class="txt">Glute Bridges – 3 × 15</span></div>
          <div class="item"><span class="icon">🔔</span><span class="txt">Kettlebell Swings – 3 × 20</span></div>
          <div class="item"><span class="icon">🧍</span><span class="txt">Bodyweight Squats – 3 × 20</span></div>
        </div>
      </div>
      <div class="section">
        <h3>Core</h3>
        <div class="item"><span class="icon">🧗</span><span class="txt">Hanging Knee Raises – 3 × 15</span></div>
      </div>
      <div class="foot"><span>Cool‑down & Stretching • 10 min</span><span class="note">Hips back • Flat back</span></div>
    </section>

    <!-- Saturday -->
    <section class="card" data-day="saturday">
      <h2>🏃 Saturday <span class="tag amber">Cardio + Core + Recovery</span></h2>
      <div class="section">
        <h3>Cardio • 30–45 min</h3>
        <div class="list">
          <div class="item"><span class="icon">🏃</span><span class="txt">Elliptical, Cycling, or Brisk Walking</span></div>
        </div>
      </div>
      <div class="section">
        <h3>Core Focus</h3>
        <div class="list">
          <div class="item"><span class="icon">🤸</span><span class="txt">Plank Variations – 3 × 1 min</span></div>
          <div class="item"><span class="icon">↔️</span><span class="txt">Side Plank – 3 × 30 s each side</span></div>
          <div class="item"><span class="icon">🔄</span><span class="txt">Reverse Crunch – 3 × 15</span></div>
        </div>
      </div>
      <div class="foot"><span>Optional: 15–20 min light stretching or yoga</span><span class="note">Keep it easy • Restore</span></div>
    </section>

    <!-- Sunday -->
    <section class="card sunday" data-day="sunday">
      <h2>✅ Sunday <span class="tag">Rest / Light Activity</span></h2>
      <div class="section">
        <h3>Active Options</h3>
        <div class="list">
          <div class="item"><span class="icon">🚶</span><span class="txt">Walk</span></div>
          <div class="item"><span class="icon">🧘</span><span class="txt">Light yoga or mobility</span></div>
          <div class="item"><span class="icon">🤸</span><span class="txt">Stretching</span></div>
        </div>
      </div>
      <div class="foot"><span class="muted">Recovery, hydration, sleep</span><span class="accent">Reset for Monday</span></div>
    </section>
  </div>
</div>

<script>
(function(){
  const STORAGE_KEY = 'gymProgressV1';
  const COOKIE_KEY = 'gymProgressV1'; // cookie stores only checked IDs (compact)
  let state = { items: {} }; // { id: { checked: true, ts: number } }

  function slugify(s){ return s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'').slice(0,80); }

  function loadState(){
    // Try localStorage first
    try {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (raw) state = JSON.parse(raw);
    } catch (e) {
      console.warn('localStorage unavailable, falling back to cookie', e);
    }
    // Fallback cookie -> merge
    const cookieVal = getCookie(COOKIE_KEY);
    if (cookieVal) {
      try {
        const ids = JSON.parse(cookieVal);
        ids.forEach(id => {
          if (!state.items[id]) state.items[id] = { checked: true, ts: Date.now() };
        });
      } catch {}
    }
  }
  function saveState(){
    // Save full state to localStorage
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    } catch (e) {
      console.warn('localStorage save failed', e);
    }
    // Save compact checked id list to cookie (size-safe)
    try {
      const ids = Object.entries(state.items).filter(([,v]) => v.checked).map(([k])=>k);
      setCookie(COOKIE_KEY, JSON.stringify(ids), 365);
    } catch (e) {}
  }
  function setCookie(name, value, days){
    const maxAge = days ? days*86400 : 31536000;
    document.cookie = name + '=' + encodeURIComponent(value) + '; max-age=' + maxAge + '; path=/';
  }
  function getCookie(name){
    const parts = document.cookie.split(';').map(v=>v.trim());
    for (const p of parts){
      if (p.startsWith(name + '=')) return decodeURIComponent(p.slice(name.length+1));
    }
    return null;
  }

  // Add checkboxes to every .item and wire them up
  function initCheckboxes(){
    document.querySelectorAll('.card').forEach((card)=>{
      const day = card.getAttribute('data-day') || 'day';
      card.querySelectorAll('.item').forEach((item, idx)=>{
        if (item.dataset.bound) return;
        const text = item.querySelector('.txt')?.textContent?.trim() || item.textContent.trim();
        const baseId = slugify(day + '|' + text);
        const id = `${baseId}-${idx}`;
        item.dataset.id = id;

        // Create checkbox
        const chk = document.createElement('input');
        chk.type = 'checkbox';
        chk.className = 'chk';
        chk.id = id;

        // Insert checkbox as first child
        item.insertBefore(chk, item.firstChild);

        // Restore state
        const saved = state.items[id]?.checked === true;
        chk.checked = !!saved;
        item.classList.toggle('done', chk.checked);

        // Listen for changes
        chk.addEventListener('change', ()=>{
          state.items[id] = { checked: chk.checked, ts: Date.now() };
          item.classList.toggle('done', chk.checked);
          saveState();
        });

        item.dataset.bound = '1';
      });
    });
  }

  // Export to XML
  function exportXML(){
    const lines = ['<?xml version="1.0" encoding="UTF-8"?>', `<progress generated="${new Date().toISOString()}">`];
    for (const [id, val] of Object.entries(state.items)){
      lines.push(`  <exercise id="${id}">`);
      lines.push(`    <checked>${val.checked ? 'true' : 'false'}</checked>`);
      lines.push(`    <timestamp>${val.ts || ''}</timestamp>`);
      lines.push(`  </exercise>`);
    }
    lines.push('</progress>');
    const xml = lines.join('\n');
    const blob = new Blob([xml], { type: 'application/xml' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'gym-progress.xml';
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  }

  // Import from XML
  function importXML(file){
    const reader = new FileReader();
    reader.onload = ()=> {
      try {
        const parser = new DOMParser();
        const doc = parser.parseFromString(reader.result, 'application/xml');
        const nodes = doc.querySelectorAll('exercise');
        nodes.forEach(n=>{
          const id = n.getAttribute('id');
          const checked = (n.querySelector('checked')?.textContent || '').trim().toLowerCase() === 'true';
          const ts = parseInt((n.querySelector('timestamp')?.textContent || '').trim(), 10) || Date.now();
          state.items[id] = { checked, ts };
        });
        saveState();
        // Re-apply to UI
        document.querySelectorAll('.item').forEach(item=>{
          const id = item.dataset.id;
          if (!id) return;
          const v = state.items[id]?.checked === true;
          const box = item.querySelector('input[type=checkbox]');
          if (box) box.checked = v;
          item.classList.toggle('done', v);
        });
        alert('Progress imported.');
      } catch (e) {
        alert('Failed to import XML.');
      }
    };
    reader.readAsText(file);
  }

  function resetAll(){
    if (!confirm('Clear all saved progress?')) return;
    state = { items: {} };
    saveState();
    document.querySelectorAll('.item').forEach(item=>{
      const box = item.querySelector('input[type=checkbox]');
      if (box) box.checked = false;
      item.classList.remove('done');
    });
  }

  // Init
  loadState();
  initCheckboxes();

  // Wire toolbar
  document.getElementById('exportXmlBtn').addEventListener('click', exportXML);
  document.getElementById('importXmlInput').addEventListener('change', (e)=>{
    const f = e.target.files && e.target.files;
    if (f) importXML(f);
    e.target.value = '';
  });
  document.getElementById('resetAllBtn').addEventListener('click', resetAll);

})();
</script>
</body>
</html>
